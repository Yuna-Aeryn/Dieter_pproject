// ... inside app.post('/get-recommendation', ...)

    // 2. ìš”ì²­ ë³´ë‚´ê¸° (Request to Python)
    const response = await axios.post(`${pythonBaseUrl}/recommend`, {
      user_state: {
          "rec_cal": 2500, 
          ...req.body.currentIntake 
      },
      recent_food_names: foodList || []
    });

    // ğŸ”¥ [MISSING LINE] Extract the data from the response!
    const recommendations = response.data; 

    // Now 'recommendations' is defined, so this works:
    if (recommendations && recommendations.length > 0) {
        const safeList = recommendations.map(item => ({
            menuName: item.recommend_menu,
            calories: extractNumber(item.calorie),
            reason: item.reason,
            score: extractNumber(item.score)
        }));

        const combinedTitle = safeList.map((item, idx) => `${idx+1}. ${item.menuName}`).join(' / ');
        const combinedReason = safeList.map((item, idx) => 
            `[${idx+1}ìœ„] ${item.menuName} (${item.calories}kcal)\nğŸ‘‰ ${item.reason}`
        ).join('\n\n');

        res.status(200).json({
            menuName: combinedTitle,
            calories: safeList[0].calories,
            reason: combinedReason
        });
    } else {
        res.status(200).json({ menuName: "ì¶”ì²œ ë¶ˆê°€", calories: 0, reason: "ì¡°ê±´ì— ë§ëŠ” ë©”ë‰´ê°€ ì—†ìŠµë‹ˆë‹¤." });
    }
// ...